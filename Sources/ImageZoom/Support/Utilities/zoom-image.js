/* image-zoom 1.0.0 | MIT License */
(function(){var w=Object.assign||function(d){for(var f=arguments,l=1;l<arguments.length;l++){var q=f[l],r;for(r in q)Object.prototype.hasOwnProperty.call(q,r)&&(d[r]=q[r])}return d},A=function(d){return"IMG"===d.tagName},B=function(d){return d&&1===d.nodeType},G=function(d){try{return Array.isArray(d)?d.filter(A):NodeList.prototype.isPrototypeOf(d)?[].slice.call(d).filter(A):B(d)?[d].filter(A):"string"===typeof d?[].slice.call(document.querySelectorAll(d)).filter(A):[]}catch(f){throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom");}},J=function(d){var f=document.createElement("div");f.classList.add("medium-zoom-overlay");f.style.background=d;return f},K=function(d){var f=d.getBoundingClientRect(),l=f.top,q=f.left,r=f.width;f=f.height;d=d.cloneNode();var u=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,v=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;d.removeAttribute("id");d.style.position="absolute";d.style.top=l+u+"px";d.style.left=q+v+"px";d.style.width=r+"px";d.style.height=f+"px";d.style.transform="";return d},x=function(d,f){var l=w({bubbles:!1,cancelable:!1,detail:void 0},f);if("function"===typeof window.CustomEvent)return new CustomEvent(d,l);var q=document.createEvent("CustomEvent");q.initCustomEvent(d,l.bubbles,l.cancelable,l.detail);return q},L=function l(f){var q=window.Promise||function(b){function k(){}b(k,k)},r=function(){for(var b=arguments,k=arguments.length,c=Array(k),g=0;g<k;g++)c[g]=b[g];var p=c.reduce(function(e,m){return[].concat(e,G(m))},[]);p.filter(function(e){return-1===t.indexOf(e)}).forEach(function(e){t.push(e);e.classList.add("medium-zoom-image")});C.forEach(function(e){var m=e.type,z=e.listener,D=e.options;p.forEach(function(E){E.addEventListener(m,z,D)})});return n},u=function(){var b=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).target,k=function(){var c={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},g=void 0,p=void 0;if(h.container)if(h.container instanceof Object)c=w({},c,h.container),g=c.width-c.left-c.right-2*h.margin,p=c.height-c.top-c.bottom-2*h.margin;else{var e=(B(h.container)?h.container:document.querySelector(h.container)).getBoundingClientRect();c=w({},c,{width:e.width,height:e.height,left:e.left,top:e.top})}g=g||c.width-2*h.margin;p=p||c.height-2*h.margin;var m=a.zoomedHd||a.original;e=".svg"===(m.currentSrc||m.src).substr(-4).toLowerCase()?g:m.naturalWidth||g;var z=".svg"===(m.currentSrc||m.src).substr(-4).toLowerCase()?p:m.naturalHeight|| p;m=m.getBoundingClientRect();var D=m.width,E=m.height;e=Math.min(Math.min(e,g)/D,Math.min(z,p)/E);c="scale("+e+") translate3d("+(-m.left+(g-D)/2+h.margin+c.left)/e+"px, "+(-m.top+(p-E)/2+h.margin+c.top)/e+"px, 0)";a.zoomed.style.transform=c;a.zoomedHd&&(a.zoomedHd.style.transform=c)};return new q(function(c){if(b&&-1===t.indexOf(b))c(n);else if(a.zoomed)c(n);else{if(b)a.original=b;else if(0<t.length)a.original=t[0];else{c(n);return}a.original.dispatchEvent(x("medium-zoom:open",{detail:{zoom:n}})); H=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;y=!0;a.zoomed=K(a.original);document.body.appendChild(F);if(h.template){var g=B(h.template)?h.template:document.querySelector(h.template);a.template=document.createElement("div");a.template.appendChild(g.content.cloneNode(!0));document.body.appendChild(a.template)}document.body.appendChild(a.zoomed);window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")});a.original.classList.add("medium-zoom-image--hidden");a.zoomed.classList.add("medium-zoom-image--opened");a.zoomed.addEventListener("click",v);a.zoomed.addEventListener("transitionend",function z(){y=!1;a.zoomed.removeEventListener("transitionend",z);a.original.dispatchEvent(x("medium-zoom:opened",{detail:{zoom:n}}));c(n)});if(a.original.getAttribute("data-zoom-src")){a.zoomedHd=a.zoomed.cloneNode();a.zoomedHd.removeAttribute("srcset");a.zoomedHd.removeAttribute("sizes");a.zoomedHd.src=a.zoomed.getAttribute("data-zoom-src");a.zoomedHd.onerror=function(){clearInterval(p);console.warn("Unable to reach the zoom image target "+a.zoomedHd.src);a.zoomedHd=null;k()};var p=setInterval(function(){a.zoomedHd.complete&&(clearInterval(p),a.zoomedHd.classList.add("medium-zoom-image--opened"),a.zoomedHd.addEventListener("click",v),document.body.appendChild(a.zoomedHd),k())},10)}else if(a.original.hasAttribute("srcset")){a.zoomedHd=a.zoomed.cloneNode();a.zoomedHd.removeAttribute("sizes");a.zoomedHd.removeAttribute("loading");var e=a.zoomedHd.addEventListener("load",function(){a.zoomedHd.removeEventListener("load", e);a.zoomedHd.classList.add("medium-zoom-image--opened");a.zoomedHd.addEventListener("click",v);document.body.appendChild(a.zoomedHd);k()})}else k()}})},v=function(){return new q(function(b){y||!a.original?b(n):(y=!0,document.body.classList.remove("medium-zoom--opened"),a.zoomed.style.transform="",a.zoomedHd&&(a.zoomedHd.style.transform=""),a.template&&(a.template.style.transition="opacity 150ms",a.template.style.opacity=0),a.original.dispatchEvent(x("medium-zoom:close",{detail:{zoom:n}})),a.zoomed.addEventListener("transitionend", function c(){a.original.classList.remove("medium-zoom-image--hidden");document.body.removeChild(a.zoomed);a.zoomedHd&&document.body.removeChild(a.zoomedHd);document.body.removeChild(F);a.zoomed.classList.remove("medium-zoom-image--opened");a.template&&document.body.removeChild(a.template);y=!1;a.zoomed.removeEventListener("transitionend",c);a.original.dispatchEvent(x("medium-zoom:closed",{detail:{zoom:n}}));a.original=null;a.zoomed=null;a.zoomedHd=null;a.template=null;b(n)}))})},I=function(){var b=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).target;return a.original?v():u({target:b})},t=[],C=[],y=!1,H=0,h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a={original:null,zoomed:null,zoomedHd:null,template:null};"[object Object]"===Object.prototype.toString.call(f)?h=f:(f||"string"===typeof f)&&r(f);h=w({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},h);var F=J(h.background);document.addEventListener("click",function(b){b=b.target;b===F?v():-1!==t.indexOf(b)&&I({target:b})});document.addEventListener("keyup",function(b){b=b.key||b.keyCode;"Escape"!==b&&"Esc"!==b&&27!==b||v()});document.addEventListener("scroll",function(){!y&&a.original&&Math.abs(H-(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0))>h.scrollOffset&&setTimeout(v,150)});window.addEventListener("resize",v);var n={open:u,close:v,toggle:I,update:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};b.background&&(F.style.background= b.background);b.container&&b.container instanceof Object&&(b.container=w({},h.container,b.container));if(b.template){var k=B(b.template)?b.template:document.querySelector(b.template);b.template=k}h=w({},h,b);t.forEach(function(c){c.dispatchEvent(x("medium-zoom:update",{detail:{zoom:n}}))});return n},clone:function(){return l(w({},h,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}))},attach:r,detach:function(){for(var b=arguments,k=arguments.length,c=Array(k),g=0;g<k;g++)c[g]=b[g];a.zoomed&& v();var p=0<c.length?c.reduce(function(e,m){return[].concat(e,G(m))},[]):t;p.forEach(function(e){e.classList.remove("medium-zoom-image");e.dispatchEvent(x("medium-zoom:detach",{detail:{zoom:n}}))});t=t.filter(function(e){return-1===p.indexOf(e)});return n},on:function(b,k){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};t.forEach(function(g){g.addEventListener("medium-zoom:"+b,k,c)});C.push({type:"medium-zoom:"+b,listener:k,options:c});return n},off:function(b,k){var c=2<arguments.length&& void 0!==arguments[2]?arguments[2]:{};t.forEach(function(g){g.removeEventListener("medium-zoom:"+b,k,c)});C=C.filter(function(g){return!(g.type==="medium-zoom:"+b&&g.listener.toString()===k.toString())});return n},getOptions:function(){return h},getImages:function(){return t},getZoomedImage:function(){return a.original}};return n};(function(f,l){void 0===l&&(l={});var q=l.insertAt;if(f&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],u=document.createElement("style"); u.type="text/css";"top"===q?r.firstChild?r.insertBefore(u,r.firstChild):r.appendChild(u):r.appendChild(u);u.styleSheet?u.styleSheet.cssText=f:u.appendChild(document.createTextNode(f))}})(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}"); var M=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.msMatchesSelector;(function(){var f=Array.apply(null,document.querySelectorAll(".content img:not([data-no-zoom])"));f=f.filter(function(q){return!1===M.call(q,"a img")});l&&l.detach();var l=L(f)})()})();
